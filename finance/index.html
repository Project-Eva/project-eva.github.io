<!DOCTYPE html>
<html>

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <title>Home Automation | EEFA</title>

  <meta name="description" content="Project Eva | Home Automation Project by Aditya, Elvis, Evelin, Fahima">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="../assets/css/w3.css">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
<link href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet">
  <link rel="stylesheet" href="../assets/css/custom.css">
  <link rel="stylesheet" href="../assets/css/datatable.css">
</head>

<body class="w3-light-grey">


  <!-- Top container -->
  <div class="w3-bar w3-top w3-large"
    style="z-index:4;background-color: #D7DBDD;box-shadow:  0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24);">
    <button onclick="NavMinimize()" id="nav-logo" style="width:200px;"
      class="w3-bar-item w3-d-blue w3-hover-d-blue w3-animation w3-button"> <b>Project Eva</b></button>
    <button class="w3-bar-item w3-button w3-hide-large w3-hover-none w3-hover-text-light-grey" onclick="w3_open();">
      &nbsp;</button>
    <span class="w3-bar-item w3-right"><b><i class="material-icons fa-line-chart"></i> Finance</b></span>
  </div>

  <!-- Sidebar/menu -->
  <nav class="w3-sidebar w3-d-blue w3-collapse" id="navBar"
    style="z-index: 3; width: 200px; display: none;box-shadow:  0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24);"
    id="mySidebar"><br>
    <div class="w3-container w3-row">
      <div class="w3-col w3-center s4">
        <img src="../index_files/avatar2.png" id="holder/profile" class="w3-circle" style="width:46px">
      </div>
      <div class="w3-col w3-center s8 w3-bar  w3-margin-bottom">
        <span class="w3-large"><b id="holder/name"></b></span><br>
        <span><small><i id="holder/location"></i>Home Owner</small></span><br>
      </div>
    </div>
    <div class="w3-bar-block w3-margin-top">
      <a href="../" class="w3-bar-item w3-nav w3-animation  w3-button w3-padding" title="Dashboard"><i class="material-icons bar-icon">home</i>&nbsp; <span>Dashboard</span></a>
      <a href="../control/" class="w3-bar-item w3-nav w3-animation w3-button w3-padding" title="Switch Control"><i class="material-icons  bar-icon">toggle_on</i>&nbsp; <span>Switch Control</span></a>
      <a href="../finance/" class="w3-bar-item w3-nav w3-animation w3-button w3-padding w3-nav-current" title="Finance"><i class="material-icons bar-icon">paid</i>&nbsp; <span>Finance</span></a>            
      <a href="../insights/" class="w3-bar-item w3-nav w3-animation w3-button w3-padding " title="Insights"><i class="material-icons bar-icon">insights</i>&nbsp; <span>Insights</span></a>
      <a href="../device/" class="w3-bar-item w3-nav w3-animation w3-button w3-padding" title="System"><i class="material-icons bar-icon">cloud_download</i>&nbsp; <span>System</span></a>            
      <a href="../scan/" class="w3-bar-item w3-nav w3-animation w3-button w3-padding" title="Scan a Bill">Scan</a>
      <button class="w3-bar-item w3-nav w3-animation w3-button w3-padding"
        onclick="(confirm('Logout from System?')?logOut():false)" title="Logout">Logout</button>
      <button class="w3-bar-item w3-nav w3-animation w3-button w3-padding w3-center" title="EVA Assistant">
        <div class="w3-center" style="text-align: center;">
          <div style="width: fit-content;display: inline-block;">
            <div id="eva-search" class=" voice-eva">
              <i class="material-icons">mic</i>
            </div>
            <span>EVA Assistant</span>
          </div>
        </div>
      </button>
    </div>
    <div id="navBottomLogo" class="w3-bottom w3-container w3-small w3-padding">
      EEFA | <b>Project Eva</b>
    </div>
  </nav>
  <!-- The EVA Interface -->
  <div id="eva-modal" class="w3-modal w3-animation">
    <div class="w3-modal-content w3-round w3-padding">
      <div class="w3-container  w3-padding w3-center">
        <h3>Eva Assistant: <small id="eva-status" class="w3-indigo w3-text-white w3-padding w3-round">Loading...</small></h3>
        <div class="w3-block w3-padding chat-container">
          <p class="eva-chat">Hello There!</p>
          <p class="you-chat">Hello Eva</p>
        </div>
        <button class="w3-button w3-small" id="eva-send" style="position: absolute;right: 5%;"><i class="material-icons">send</i></button>
        <input type="text" name="eva-bar" placeholder="Speak or type here..." class="w3-input w3-block w3-border">
        <p>Detected Action</p>
        <div id="eva-output" class="w3-container w3-padding w3-light-gray">
          Loading...
        </div>
      </div>
    </div>
    <script src="../assets/js/whichx.js"></script>
    <script src="../assets/js/eva-classifier.js"></script>
    <script src="../assets/js/eva.js"></script>
    <script src="../assets/js/webspeech.js"></script>
  </div>

  <!-- Overlay effect when opening sidebar on small screens -->
  <div class="w3-overlay w3-hide-large w3-animate-opacity" onclick="w3_close()" style="cursor: pointer; display: none;"
    title="close side menu" id="myOverlay"></div>

  <!-- !PAGE CONTENT! -->
  <div class="w3-main" style="margin-left:200px;margin-top:43px;">
    <!--class="table table-bordered"-->


    <div class="w3-panel">
      <div class="w3-margin-top w3-container">
        <h2 class="w3-center"><b>Finance Dashboard</b></h2>
        <div class="w3-third">
          <h5 class="w3-center">Electricity</h5>
          <div class="w3-container w3-d-blue w3-border-right-white w3-padding-16" style="height:140px;">
            <div class="w3-left w3-large"><i class="material-icons w3-xxxlarge">paid</i></div>
            <h6 style="text-align: right;">Average Electricity Expense</h6>
            <h3 style="text-align: right;">₹<span id="holder/electricity/average">Calculating..</span></h3>
          </div>

          <div class="w3-container w3-d-blue w3-border-right-white w3-padding-16" style="height:140px;">
            <div class="w3-left w3-large"><i class="material-icons w3-xxxlarge">attach_money</i></div>
            <h6 style="text-align: right;">Peak Electricity Month</h6>
            <h3 style="text-align: right;">₹<span id="holder/electricity/peakValue">Calculating..</span><small
                id="holder/electricity/peakMonth"></small></h3>
          </div>

          <div class="w3-container w3-d-blue w3-border-right-white w3-padding-16" style="height:140px;">
            <div class="w3-left w3-large"><i class="material-icons w3-xxxlarge">attach_money</i></div>
            <h6 style="text-align: right;">Yearly Expense</h6>
            <h3 style="text-align: right;">₹<span id="holder/electricity/total">Calculating..</span></h3>
          </div>
        </div>
        <div class="w3-third">
          <h5 class="w3-center">Household</h5>
          <div class="w3-container w3-blue w3-border-right-white w3-padding-16" style="height:140px;">
            <div class="w3-left w3-large"><i class="material-icons w3-xxxlarge">paid</i></div>
            <h6 style="text-align: right;">Average Monthly Expense</h6>
            <h3 style="text-align: right;">₹<span id="holder/household/average">Calculating..</span></h3>
          </div>
          <div class="w3-container w3-blue w3-border-right-white w3-padding-16" style="height:140px;">
            <div class="w3-left w3-large"><i class="material-icons w3-xxxlarge">attach_money</i></div>
            <h6 style="text-align: right;">Average Monthly Income</h6>
            <h3 style="text-align: right;">₹<span id="holder/household/income">Calculating..</span></h3>
          </div>

          <div class="w3-container w3-blue w3-border-right-white w3-padding-16" style="height:140px;">
            <div class="w3-left w3-large"><i class="material-icons w3-xxxlarge">attach_money</i></div>
            <h6 style="text-align: right;">Savings</h6>
            <h3 style="text-align: right;">₹<span id="holder/household/savings">Calculating..</span></h3>
          </div>
        </div>
        <div class="w3-third">
          <h5 class="w3-center">Gas</h5>
          <div class="w3-container w3-d-blue w3-border-right-white w3-padding-16" style="height:140px;">
            <div class="w3-left w3-large"><i class="material-icons w3-xxxlarge">delete</i></div>
            <h6 style="text-align: right;">Duration</h6>
            <h3 style="text-align: right;"><span id="holder/gas/duration">Calculating..</span><br> <small>days per cannister</small></h3>
          </div>

          <div class="w3-container w3-d-blue w3-border-right-white w3-padding-16" style="height:140px;">
            <div class="w3-left w3-large"><i class="material-icons w3-xxxlarge">event_available</i></div>
            <h6 style="text-align: right;">Next Book Date</h6>
            <h3 style="text-align: right;"><span id="holder/gas/nextdate">Calculating..</span></h3>
          </div>

          <div class="w3-container w3-d-blue w3-border-right-white w3-padding-16" style="height:140px;">
            <div class="w3-left w3-large"><i class="material-icons w3-xxxlarge">paid</i></div>
            <h6 style="text-align: right;">Last Cannister Rate</h6>
            <h3 style="text-align: right;">₹<span id="holder/gas/lastrate">Calculating</span></h3>
          </div>
        </div>
      </div>
    </div>
    
    <div class="w3-container w3-margin">
      <button onclick="document.getElementById('add_form').classList.toggle('w3-show');openTab(false, 'credit');" class="w3-button w3-margin w3-right"><i class="material-icons">add</i> Add Transaction</button>
      <h3 class="w3-center w3-block"><b>Bills </b></h3>
    </div>
    
    <!-- New Bill Form Card -->
    <div class="w3-margin w3-container w3-hide" style="height: 350px;" id="add_form">
      
      <div class="w3-bar-block w3-quarter w3-light-grey" style="width:120px">
        <h5 class="w3-bar-item">Transaction</h5>
        <button class="w3-bar-item w3-button tablink" onclick="openTab(event, 'credit')">Earning</button>
        <button class="w3-bar-item w3-button tablink" onclick="openTab(event, 'debit')">Spending</button>
      </div>
      <div style="margin-left:130px" class="w3-rest ">
        <div id="credit" class="w3-container city" style="display:none">
          <h2>Credit</h2>
          <div class="w3-row w3-margin">
            <div class="w3-half">
              <span class="form-input-title">Date of Transaction</span>
              <input class="w3-input form-input" type="date" placeholder="Date of Transaction" name="credit-date" required>
            </div>
            <div class="w3-half">
              <span class="form-input-title">Transaction Amount</span>
              <input class="w3-input form-input" type="number" placeholder="Enter Amount" name="credit-amount" required>
            </div>
          </div>
          <div class="w3-row w3-margin">
            <div class="w3-half">
              <span class="form-input-title">Category of Transaction</span>
              <select class="w3-input form-input" name="credit-cat">
                <option value="none">Category of Transation</option>
                <option value="salary">Salary</option>
                <option value="gift">Gift</option>
                <option value="other">Other</option>
              </select>
            </div>
          </div>
        </div>
        <div id="debit" class="w3-container city" style="display:none">
          <h2>Debit</h2>
          <div class="w3-row w3-margin">
            <div class="w3-half">
              <span class="form-input-title">Category of Transaction</span>
              <select class="w3-input form-input" name="debit-cat" onchange="nextField(this)">
                <option value="none">Select Type of Transaction</option>
                <option value="electricity">Household Electricity</option>
                <option value="gas">Household Gas</option>
                <option value="groceries">Groceries</option>
                <option value="repairs">Repairs</option>
                <option value="misc">Misc</option>
              </select>
            </div>
            <div class="w3-half">
              <span class="form-input-title">Date of Transaction</span>
              <input class="w3-input form-input" type="date" placeholder="Date of Transaction" name="debit-date" required>
            </div>
          </div>
          <div class="w3-row w3-margin">
            <div class="w3-half">
              <span class="form-input-title">Transaction Amount</span>
              <input class="w3-input form-input" type="number" placeholder="Enter Amount" name="debit-amount" required>
            </div>
            <div id="gas" style="display: none;" class="w3-half">
              <span class="form-input-title">Estimated Gas Booking Date</span>
              <input class="w3-input form-input" type="date" placeholder="Estimated Gas Booking Date" name="debit-bookdate"
                required>
            </div>
            <div id="electricity" style="display: none;" class="w3-half">
              <span class="form-input-title">Energy Units Consumed</span>
              <input class="w3-input form-input" type="number" placeholder="Enter Units Consumed" name="debit-units"
                required>
            </div>
          </div>
        </div>
        <div class="w3-half w3-right">
          <button onclick="document.getElementById('add_form').classList.toggle('w3-show');"
            class="w3-button w3-hover-d-blue w3-half"><i class="material-icons ">close</i> Cancel</button>
          <button class="w3-button w3-hover-orange w3-half"><i class="material-icons" onclick="SubmitForm()">save</i> Save Transaction</button>
        </div>
      </div>
      <script src="../assets/js/finance-card.js"></script>
    </div>
    

    <div class="w3-panel">
      <div class="w3-container w3-margin-top w3-round">
        <table style="border: none;" class="w3-table-all " id="first-datatable-output">
          <thead>
            <tr class="w3-blue">
              <td>Date</td>
              <td>Category</td>
              <td>Type</td>
              <td>Amount</td>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td colspan="4">-</td>
            </tr>
            <tr>
              <td colspan="4">-</td>
            </tr>
            <tr>
              <td colspan="4">-</td>
            </tr>
            <tr>
              <td colspan="4">-</td>
            </tr>
            <tr>
              <td colspan="4">-</td>
            </tr>
            <tr>
              <td colspan="4">-</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    
    <div class="w3-panel">
      
      <div class="w3-row-padding w3-container" style="margin:0 -16px">
        <h3 class="w3-center"><b>Plots </b></h3>
        <div class="w3-block w3-white w3-round w3-padding">
          <div id="chart"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- End page content -->
  </div>
</body>
<script src="https://www.gstatic.com/firebasejs/8.3.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.3.1/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.3.1/firebase-database.js"></script>
<script src="../assets/js/auth.js"></script>
<script src="../assets/js/signin.js"></script>
<script src="../assets/js/custom.js"></script>
<script src="../assets/js/sidebar.js"></script>
<script src="../assets/js/fire-cards.js"></script>
<script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
<script src="../assets/js/datatable.js"></script>
<!-- <script src="../assets/js/ledger.js"></script> -->
<script src="../assets/js/finance.js"></script>

</html>